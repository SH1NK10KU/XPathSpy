window.xpathOfSelectedElement="";function getNotificationId(){var a=Math.floor(Math.random()*9007199254740992)+1;return a.toString();}function messageReceived(){var a=getMessage(xpath);
chrome.notifications.create(getNotificationId(),{title:"XPath Spy",iconUrl:"images/icon128.png",type:"basic",message:a},function(){});}chrome.commands.onCommand.addListener(function(b){if(b==="xpathspy"){var a=prompt("Please input your XPath:","");
chrome.tabs.query({currentWindow:true,active:true},function(c){chrome.tabs.sendMessage(c[0].id,{command:"shortcut",xpath:a});});messageReceived();}});chrome.runtime.onMessage.addListener(function(c,b,a){if(c.message==="notification"){chrome.notifications.create(getNotificationId(),{title:"XPath Spy",iconUrl:"images/icon128.png",type:"basic",message:c.result},function(){});
}else{if(c.message==="contextMenu"){window.xpathOfSelectedElement=c.result;}}});chrome.gcm.onMessage.addListener(messageReceived);function conttextMenuHandler(b,a){prompt("The XPath of your selected element is:",window.xpathOfSelectedElement);
}chrome.contextMenus.onClicked.addListener(conttextMenuHandler);chrome.runtime.onInstalled.addListener(function(){chrome.contextMenus.create({title:"Spy XPath",type:"normal",id:"spyxpath",contexts:["all"]});
});
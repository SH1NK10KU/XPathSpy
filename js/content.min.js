chrome.runtime.onMessage.addListener(function(c,b){var g=0;var a="";if(c.command==="shortcut"){if(c.xpath.match(/^(\/)/)===null){a="Please input valid XPath!";
console.error(a);}else{try{var d=document.evaluate(c.xpath,document,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);g=d.snapshotLength;if(g>0){a="There "+(g>1?"are "+g+" elements":"is only one element")+" which XPath like '"+c.xpath+"' in this page.";
console.log(a);}else{a="There is no such element in this page!";console.error(a);}}catch(f){a=f.message.substr(f.message.indexOf("The string"));}}chrome.runtime.sendMessage({message:"notification",result:a});
}});document.oncontextmenu=function(b){b=b||window.event;var a=b.target||b.srcElement;chrome.runtime.sendMessage({message:"contextMenu",result:getElementInfo(a)});
return true;};var getElementInfo=function selectedElement(d){function f(m,k){var j={num:0,index:1};var h=0;var l=0;var g=m.previousSibling;var i=m.nextSibling;
if(k){while(g!=null){if(g.id===m.id&&g.tagName===m.tagName&&g.name===m.name&&g.className===m.className&&g.type===m.type){h+=1;}g=g.previousSibling;}while(i!=null){if(i.id===m.id&&i.tagName===m.tagName&&i.name===m.name&&i.className===m.className&&i.type===m.type){l+=1;
}i=i.nextSibling;}}else{while(g!=null){if(g.tagName===m.tagName){h+=1;}g=g.previousSibling;}while(i!=null){if(i.tagName===m.tagName){l+=1;}i=i.nextSibling;
}}j.num=h+l;j.index+=h;return j;}function c(n,l){var j=n.tagName.toLowerCase();var k=f(n,l);if(l){var m=new Array();var i=["@type=","@class=","@name=","@id="];
var g=[n.type,n.className,n.name,n.id];for(var h=i.length-1;h>=0;h--){if(typeof g[h]!=="undefined"&&g[h]!==""){m.push(i[h]+"'"+g[h]+"'");}}if(m.length>0){j+="["+m.join(" and ")+"]";
}}if(k.num>0){j+="["+k.index+"]";}return j;}function a(g){return b("//"+g.tagName.toLowerCase()+"[@id='"+g.id+"']");}function e(j,i){var h=c(j,i);var g=j.parentNode;
while(g.tagName){if(!i){if(j.id!==""){return a(j);}if(g.id!==""){return a(g)+"/"+h;}}h=c(g,i)+"/"+h;g=g.parentNode;}return b(h);}function b(g){return g.replace(/^((\/){0,2}html)/,"/html");
}return e(d,false);};